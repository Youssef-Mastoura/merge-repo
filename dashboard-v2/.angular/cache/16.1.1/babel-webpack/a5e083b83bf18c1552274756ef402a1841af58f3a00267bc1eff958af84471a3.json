{"ast":null,"code":"import { catchError } from 'rxjs';\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class UserService {\n  constructor(http) {\n    this.http = http;\n    this.apiServerUrl = \"http://localhost:8089/skillswap\";\n  }\n  login(credentials) {\n    return this.http.post(`${this.apiServerUrl}/user/login`, credentials).pipe(catchError(error => {\n      // Transforme l'erreur en un format plus lisible\n      if (error.status === 401) {\n        throw new Error('Email ou mot de passe incorrect');\n      }\n      throw new Error('Erreur de connexion au serveur');\n    }));\n  }\n  getUsers() {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n      // 'Authorization': `Bearer ${token}`\n    });\n\n    return this.http.get(`${this.apiServerUrl}/user/getall`, {\n      headers\n    });\n  }\n  addUser(user) {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n      //  'Authorization': 'Bearer your-token' \n    });\n\n    return this.http.post(`${this.apiServerUrl}/user/register`, user);\n  }\n  updateuser(user) {\n    return this.http.put(`${this.apiServerUrl}update`, user);\n  }\n  deleteUser(userId) {\n    return this.http.delete(`${this.apiServerUrl}/user/delete/${userId}`);\n  }\n  exportUsersToExcel() {\n    window.open(`${this.apiServerUrl}/user/export/excel`, '_blank');\n  }\n}\nUserService.ɵfac = function UserService_Factory(t) {\n  return new (t || UserService)(i0.ɵɵinject(i1.HttpClient));\n};\nUserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserService,\n  factory: UserService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["catchError","HttpHeaders","UserService","constructor","http","apiServerUrl","login","credentials","post","pipe","error","status","Error","getUsers","headers","get","addUser","user","updateuser","put","deleteUser","userId","delete","exportUsersToExcel","window","open","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Sakka\\Desktop\\PICLOUD-GestionUser - Copie\\dashboard-v2\\src\\app\\user.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { catchError, Observable } from 'rxjs';\nimport { User } from './models/user';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  private apiServerUrl =\"http://localhost:8089/skillswap\";\n\n  constructor(private http: HttpClient){}\n  \n  login(credentials: {email: string, password: string}): Observable<any> {\n    return this.http.post(`${this.apiServerUrl}/user/login`, credentials).pipe(\n      catchError(error => {\n        // Transforme l'erreur en un format plus lisible\n        if (error.status === 401) {\n          throw new Error('Email ou mot de passe incorrect');\n        }\n        throw new Error('Erreur de connexion au serveur');\n      })\n    );\n  }\n\n  public getUsers(): Observable<User[]> {\n    const headers =new HttpHeaders({\n      'Content-Type': 'application/json',\n     // 'Authorization': `Bearer ${token}`\n    });\n  \n    return this.http.get<User[]>(`${this.apiServerUrl}/user/getall`,{headers});\n  }\n\n  public addUser(user: User): Observable<User> {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    //  'Authorization': 'Bearer your-token' \n    });\n    return this.http.post<User>(`${this.apiServerUrl}/user/register`, user)\n  }\n\n  public updateuser(user: User): Observable<User> {\n    return this.http.put<User>(`${this.apiServerUrl}update`, user);\n  }\n\n  public deleteUser(userId: number): Observable<void> {\n    \n    return this.http.delete<void>(`${this.apiServerUrl}/user/delete/${userId}`);\n  }\n\n  exportUsersToExcel(): void {\n    window.open(`${this.apiServerUrl}/user/export/excel`, '_blank');\n  }\n}\n"],"mappings":"AACA,SAASA,UAAU,QAAoB,MAAM;AAE7C,SAAqBC,WAAW,QAAQ,sBAAsB;;;AAM9D,OAAM,MAAOC,WAAW;EAItBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,YAAY,GAAE,iCAAiC;EAEjB;EAEtCC,KAAKA,CAACC,WAA8C;IAClD,OAAO,IAAI,CAACH,IAAI,CAACI,IAAI,CAAC,GAAG,IAAI,CAACH,YAAY,aAAa,EAAEE,WAAW,CAAC,CAACE,IAAI,CACxET,UAAU,CAACU,KAAK,IAAG;MACjB;MACA,IAAIA,KAAK,CAACC,MAAM,KAAK,GAAG,EAAE;QACxB,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;;MAEpD,MAAM,IAAIA,KAAK,CAAC,gCAAgC,CAAC;IACnD,CAAC,CAAC,CACH;EACH;EAEOC,QAAQA,CAAA;IACb,MAAMC,OAAO,GAAE,IAAIb,WAAW,CAAC;MAC7B,cAAc,EAAE;MACjB;KACA,CAAC;;IAEF,OAAO,IAAI,CAACG,IAAI,CAACW,GAAG,CAAS,GAAG,IAAI,CAACV,YAAY,cAAc,EAAC;MAACS;IAAO,CAAC,CAAC;EAC5E;EAEOE,OAAOA,CAACC,IAAU;IACvB,MAAMH,OAAO,GAAG,IAAIb,WAAW,CAAC;MAC9B,cAAc,EAAE;MAClB;KACC,CAAC;;IACF,OAAO,IAAI,CAACG,IAAI,CAACI,IAAI,CAAO,GAAG,IAAI,CAACH,YAAY,gBAAgB,EAAEY,IAAI,CAAC;EACzE;EAEOC,UAAUA,CAACD,IAAU;IAC1B,OAAO,IAAI,CAACb,IAAI,CAACe,GAAG,CAAO,GAAG,IAAI,CAACd,YAAY,QAAQ,EAAEY,IAAI,CAAC;EAChE;EAEOG,UAAUA,CAACC,MAAc;IAE9B,OAAO,IAAI,CAACjB,IAAI,CAACkB,MAAM,CAAO,GAAG,IAAI,CAACjB,YAAY,gBAAgBgB,MAAM,EAAE,CAAC;EAC7E;EAEAE,kBAAkBA,CAAA;IAChBC,MAAM,CAACC,IAAI,CAAC,GAAG,IAAI,CAACpB,YAAY,oBAAoB,EAAE,QAAQ,CAAC;EACjE;;AA9CWH,WAAW,C;mBAAXA,WAAW,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAX3B,WAAW,C;SAAXA,WAAW;EAAA4B,OAAA,EAAX5B,WAAW,CAAA6B,IAAA;EAAAC,UAAA,EAFV;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}