{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/course.service\";\nimport * as i4 from \"src/app/services/content.service\";\nimport * as i5 from \"@angular/platform-browser\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = [\"videoPlayer\"];\nconst _c1 = [\"pdfFileInput\"];\nfunction CourseContentComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelement(1, \"i\", 19);\n    i0.ɵɵtext(2, \" No content has been added to this course yet. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseContentComponent_div_20_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const content_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", content_r3.description_Content.length > 120 ? i0.ɵɵpipeBind3(2, 1, content_r3.description_Content, 0, 120) + \"...\" : content_r3.description_Content, \" \");\n  }\n}\nfunction CourseContentComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵlistener(\"click\", function CourseContentComponent_div_20_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const content_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.showContent(content_r3));\n    });\n    i0.ɵɵelementStart(1, \"div\", 29)(2, \"span\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 31);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, CourseContentComponent_div_20_p_8_Template, 3, 5, \"p\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const content_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    i0.ɵɵclassProp(\"even-item\", i_r4 % 2 === 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"#\", content_r3.orderIndex_Content, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(content_r3.title_Content);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(\"type-\" + content_r3.type_Content.toLowerCase());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", content_r3.type_Content, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", content_r3.description_Content);\n  }\n}\nfunction CourseContentComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵlistener(\"click\", function CourseContentComponent_div_46_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.closeContentModal());\n    });\n    i0.ɵɵelementStart(1, \"div\", 35);\n    i0.ɵɵlistener(\"click\", function CourseContentComponent_div_46_Template_div_click_1_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementStart(2, \"div\", 36)(3, \"div\", 37);\n    i0.ɵɵelement(4, \"i\", 38);\n    i0.ɵɵelementStart(5, \"h2\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function CourseContentComponent_div_46_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.closeContentModal());\n    });\n    i0.ɵɵelement(8, \"i\", 40);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(9, \"div\", 41);\n    i0.ɵɵelementStart(10, \"div\", 42)(11, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function CourseContentComponent_div_46_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.closeContentModal());\n    });\n    i0.ɵɵelement(12, \"i\", 44);\n    i0.ɵɵtext(13, \" Close \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"bi-film\", ctx_r2.contentType === \"VIDEO\")(\"bi-file-earmark-pdf\", ctx_r2.contentType === \"PDF\")(\"bi-question-circle\", ctx_r2.contentType === \"QUIZ\")(\"bi-file-text\", ctx_r2.contentType === \"TEXT\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedContent == null ? null : ctx_r2.selectedContent.title_Content);\n  }\n}\nexport class CourseContentComponent {\n  constructor(fb, route, router, courseService, contentService, sanitizer) {\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.courseService = courseService;\n    this.contentService = contentService;\n    this.sanitizer = sanitizer;\n    this.contents = [];\n    this.editingContentId = null;\n    this.contentTypes = ['VIDEO', 'PDF', 'QUIZ', 'TEXT'];\n    this.selectedFileError = null;\n    this.selectedContent = null;\n    this.contentType = '';\n    this.safeVideoUrl = null;\n    this.pdfUrl = '';\n    this.textContent = '';\n    this.isContentModalOpen = false;\n    this.selectedFile = null;\n    this.isSubmitting = false;\n  }\n  ngOnInit() {\n    this.route.params.subscribe(params => {\n      this.courseId = +params['id'];\n      this.loadCourseAndContents();\n      this.initForm();\n    });\n  }\n  initForm() {\n    this.contentForm = this.fb.group({\n      title: ['', [Validators.required, Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      url: [''],\n      description: [''],\n      orderIndex: [0, [Validators.required, Validators.min(0)]],\n      duration: [0, [Validators.min(0)]],\n      quizTitle: [''],\n      questions: this.fb.array([])\n    });\n  }\n  get questions() {\n    return this.contentForm.get('questions');\n  }\n  getQuestionOptions(questionIndex) {\n    return this.questions.at(questionIndex).get('options');\n  }\n  loadCourseAndContents() {\n    this.courseService.getCourseById(this.courseId).subscribe(course => {\n      this.course = course;\n      this.loadContents();\n    }, error => console.error('Error loading course:', error));\n  }\n  loadContents() {\n    this.contentService.getContentsByCourseId(this.courseId).subscribe(contents => {\n      this.contents = contents.sort((a, b) => (a.orderIndex_Content || 0) - (b.orderIndex_Content || 0));\n    }, error => console.error('Error loading contents:', error));\n  }\n  onTypeChange() {\n    const type = this.contentForm.get('type')?.value;\n    if (type !== 'QUIZ') {\n      this.contentForm.setControl('questions', this.fb.array([]));\n    }\n    if (type !== 'PDF') {\n      this.selectedFile = null;\n    }\n    if (type !== 'VIDEO') {\n      this.contentForm.get('url')?.reset();\n    }\n    if (type !== 'TEXT') {\n      this.contentForm.get('description')?.reset();\n    }\n  }\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        this.selectedFileError = 'Please select a valid PDF file';\n        this.pdfFileInput.nativeElement.value = '';\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        this.selectedFileError = 'File size exceeds 5MB limit';\n        this.pdfFileInput.nativeElement.value = '';\n        return;\n      }\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.pdfUrl = e.target.result; // URL data\n          this.contentForm.patchValue({\n            url: e.target.result // Stocke l'URL dans le formulaire\n          });\n        };\n\n        reader.readAsDataURL(file);\n      }\n    }\n  }\n  addQuestion() {\n    this.questions.push(this.fb.group({\n      text: ['', Validators.required],\n      options: this.fb.array([this.fb.control('', Validators.required)]),\n      correctAnswer: [0, Validators.required]\n    }));\n  }\n  removeQuestion(index) {\n    this.questions.removeAt(index);\n  }\n  addOption(questionIndex) {\n    this.getQuestionOptions(questionIndex).push(this.fb.control('', Validators.required));\n  }\n  removeOption(questionIndex, optionIndex) {\n    this.getQuestionOptions(questionIndex).removeAt(optionIndex);\n  }\n  showContent(content) {\n    this.selectedContent = content;\n    this.contentType = content.type_Content;\n    this.isContentModalOpen = true;\n    switch (content.type_Content) {\n      case 'VIDEO':\n        this.handleVideoContent(content.url_Content);\n        break;\n      case 'PDF':\n        this.pdfUrl = content.url_Content;\n        break;\n      case 'QUIZ':\n        try {\n          this.quizData = JSON.parse(content.description_Content || '{}');\n        } catch {\n          this.quizData = {\n            title: 'Quiz',\n            questions: []\n          };\n        }\n        break;\n      case 'TEXT':\n        this.textContent = content.description_Content || '';\n        break;\n    }\n  }\n  handleVideoContent(url) {\n    if (this.isYouTubeUrl(url)) {\n      const videoId = this.getYouTubeId(url);\n      const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1`;\n      this.safeVideoUrl = this.sanitizer.bypassSecurityTrustResourceUrl(embedUrl);\n    } else {\n      this.safeVideoUrl = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n    }\n  }\n  isYouTubeUrl(url) {\n    return url?.includes('youtube.com') || url?.includes('youtu.be');\n  }\n  getYouTubeId(url) {\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return match && match[2].length === 11 ? match[2] : '';\n  }\n  getSafePdfUrl(url) {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n  getSafeHtml(content) {\n    return this.sanitizer.bypassSecurityTrustHtml(content);\n  }\n  getCharFromCode(code) {\n    return String.fromCharCode(code);\n  }\n  closeContentModal() {\n    this.isContentModalOpen = false;\n    this.selectedContent = null;\n    this.safeVideoUrl = null;\n  }\n  onSubmit() {\n    if (this.contentForm.invalid) return;\n    this.isSubmitting = true;\n    const formValue = this.contentForm.value;\n    const contentData = {\n      title_Content: formValue.title,\n      type_Content: formValue.type,\n      orderIndex_Content: formValue.orderIndex,\n      duration_Content: formValue.duration\n    };\n    switch (formValue.type) {\n      case 'QUIZ':\n        contentData.description_Content = JSON.stringify({\n          title: formValue.quizTitle,\n          questions: formValue.questions\n        });\n        break;\n      case 'TEXT':\n        contentData.description_Content = formValue.description;\n        break;\n      case 'VIDEO':\n        contentData.url_Content = formValue.url;\n        break;\n      case 'PDF':\n        // Handle PDF file upload\n        break;\n    }\n    const save$ = this.editingContentId ? this.contentService.updateContent({\n      ...contentData,\n      id_Content: this.editingContentId\n    }) : this.contentService.addContent(contentData, this.courseId);\n    save$.subscribe({\n      next: () => {\n        this.isSubmitting = false;\n        this.resetForm();\n        this.loadContents();\n      },\n      error: err => {\n        console.error('Error saving content:', err);\n        this.isSubmitting = false;\n      }\n    });\n  }\n  onEditContent(content, event) {\n    event.stopPropagation();\n    this.editingContentId = content.id_Content;\n    if (content.type_Content === 'QUIZ') {\n      try {\n        const quizData = JSON.parse(content.description_Content || '{}');\n        this.contentForm.patchValue({\n          quizTitle: quizData.title\n        });\n        const questionsArray = this.fb.array(quizData.questions?.map(q => this.fb.group({\n          text: [q.text, Validators.required],\n          options: this.fb.array(q.options?.map(opt => this.fb.control(opt, Validators.required)) || []),\n          correctAnswer: [q.correctAnswer ?? 0, Validators.required]\n        })) || []);\n        this.contentForm.setControl('questions', questionsArray);\n      } catch (e) {\n        console.error('Error parsing quiz data:', e);\n      }\n    }\n    this.contentForm.patchValue({\n      title: content.title_Content,\n      type: content.type_Content,\n      url: content.url_Content || '',\n      description: content.description_Content || '',\n      orderIndex: content.orderIndex_Content || 0,\n      duration: content.duration_Content || 0\n    });\n  }\n  onDeleteContent(id, event) {\n    event.stopPropagation();\n    if (confirm('Are you sure you want to delete this content?')) {\n      this.contentService.deleteContent(id).subscribe(() => this.loadContents(), error => console.error('Delete error:', error));\n    }\n  }\n  resetForm() {\n    this.contentForm.reset({\n      orderIndex: 0,\n      duration: 0\n    });\n    this.contentForm.setControl('questions', this.fb.array([]));\n    this.selectedFile = null;\n    this.editingContentId = null;\n    if (this.pdfFileInput) {\n      this.pdfFileInput.nativeElement.value = '';\n    }\n  }\n  onCancel() {\n    this.resetForm();\n  }\n}\nCourseContentComponent.ɵfac = function CourseContentComponent_Factory(t) {\n  return new (t || CourseContentComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CourseService), i0.ɵɵdirectiveInject(i4.ContentService), i0.ɵɵdirectiveInject(i5.DomSanitizer));\n};\nCourseContentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CourseContentComponent,\n  selectors: [[\"app-course-content\"]],\n  viewQuery: function CourseContentComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.videoPlayer = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pdfFileInput = _t.first);\n    }\n  },\n  decls: 47,\n  vars: 12,\n  consts: [[1, \"container\", \"course-dashboard\"], [1, \"course-header\"], [1, \"course-title\"], [1, \"bi\", \"bi-journal-bookmark-fill\"], [\"routerLink\", \"/admin/courses\", 1, \"mauve-gradient-btn\"], [1, \"bi\", \"bi-arrow-left\"], [1, \"course-layout\"], [1, \"content-main\"], [1, \"content-card\"], [1, \"card-header\"], [1, \"bi\", \"bi-list-task\"], [1, \"content-badge\"], [1, \"card-body\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"content-items\"], [\"class\", \"content-item\", 3, \"even-item\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"course-sidebar\"], [1, \"info-card\"], [1, \"info-header\"], [1, \"bi\", \"bi-info-circle\"], [1, \"info-body\"], [1, \"info-section\"], [1, \"stats-container\"], [1, \"stat-item\"], [1, \"bi\", \"bi-file-text\"], [1, \"bi\", \"bi-calendar-check\"], [\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"empty-state\"], [1, \"content-item\", 3, \"click\"], [1, \"item-header\"], [1, \"order-badge\"], [1, \"type-label\"], [\"class\", \"item-description\", 4, \"ngIf\"], [1, \"item-description\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal-container\", 3, \"click\"], [1, \"modal-header\"], [1, \"modal-title\"], [1, \"bi\"], [1, \"modal-close\", 3, \"click\"], [1, \"bi\", \"bi-x-lg\"], [1, \"modal-content\"], [1, \"modal-footer\"], [1, \"mauve-gradient-btn\", 3, \"click\"], [1, \"bi\", \"bi-check-lg\"]],\n  template: function CourseContentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵelement(3, \"i\", 3);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 4);\n      i0.ɵɵelement(6, \"i\", 5);\n      i0.ɵɵtext(7, \" Back to Courses \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"h2\");\n      i0.ɵɵelement(13, \"i\", 10);\n      i0.ɵɵtext(14, \" Content List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"span\", 11);\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 12);\n      i0.ɵɵtemplate(18, CourseContentComponent_div_18_Template, 3, 0, \"div\", 13);\n      i0.ɵɵelementStart(19, \"div\", 14);\n      i0.ɵɵtemplate(20, CourseContentComponent_div_20_Template, 9, 8, \"div\", 15);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(21, \"div\", 16)(22, \"div\", 17)(23, \"div\", 18)(24, \"h2\");\n      i0.ɵɵelement(25, \"i\", 19);\n      i0.ɵɵtext(26, \" Course Details\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 20)(28, \"div\", 21)(29, \"h3\");\n      i0.ɵɵtext(30, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"p\");\n      i0.ɵɵtext(32);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"div\", 21)(34, \"h3\");\n      i0.ɵɵtext(35, \"Statistics\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 22)(37, \"div\", 23);\n      i0.ɵɵelement(38, \"i\", 24);\n      i0.ɵɵelementStart(39, \"span\");\n      i0.ɵɵtext(40);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"div\", 23);\n      i0.ɵɵelement(42, \"i\", 25);\n      i0.ɵɵelementStart(43, \"span\");\n      i0.ɵɵtext(44);\n      i0.ɵɵpipe(45, \"date\");\n      i0.ɵɵelementEnd()()()()()()()()();\n      i0.ɵɵtemplate(46, CourseContentComponent_div_46_Template, 14, 9, \"div\", 26);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" Course Content: \", ctx.course == null ? null : ctx.course.title_Course, \" \");\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate2(\"\", ctx.contents.length, \" item\", ctx.contents.length !== 1 ? \"s\" : \"\", \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.contents.length === 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.contents);\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate((ctx.course == null ? null : ctx.course.description_Course) || \"No description available\");\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\"Contents: \", ctx.contents.length, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Last Updated: \", i0.ɵɵpipeBind2(45, 9, ctx.course == null ? null : ctx.course.createdAt_Course, \"mediumDate\"), \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isContentModalOpen);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i2.RouterLink, i6.SlicePipe, i6.DatePipe],\n  styles: [\"\\n\\n.course-dashboard[_ngcontent-%COMP%] {\\n  background: linear-gradient(120deg, #e090c39d, #c5ecf2);\\n  min-height: 200vh;\\n  padding: 2rem;\\n  font-family: 'League Spartan', sans-serif;\\n  color: #4a3b67;\\n}\\n\\n\\n\\n.course-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  background: white;\\n  padding: 1.5rem 2rem;\\n  border-radius: 1.5rem;\\n  box-shadow: 0 8px 20px rgba(70, 5, 60, 0.1);\\n  margin-bottom: 2rem;\\n}\\n\\n.course-title[_ngcontent-%COMP%] {\\n  font-size: 2.2rem;\\n  display: flex;\\n  align-items: center;\\n  gap: 0.75rem;\\n  color: linear-gradient( #370134, #fbc2eb);\\n}\\n\\n\\n\\n.mauve-gradient-btn[_ngcontent-%COMP%] {\\n  background: linear-gradient(to right, #370134, #fbc2eb);\\n  color: white;\\n  border: none;\\n  padding: 0.75rem 1.5rem;\\n  font-weight: bold;\\n  border-radius: 2rem;\\n  transition: all 0.3s ease-in-out;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);\\n}\\n\\n.mauve-gradient-btn[_ngcontent-%COMP%]:hover {\\n  transform: scale(1.05);\\n  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);\\n}\\n\\n\\n\\n.course-layout[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 2rem;\\n}\\n\\n\\n\\n.content-card[_ngcontent-%COMP%], .info-card[_ngcontent-%COMP%] {\\n  background: white;\\n  border-radius: 1.5rem;\\n  padding: 2rem;\\n  box-shadow: 0 6px 15px rgba(0,0,0,0.1);\\n}\\n\\n\\n\\n.course-sidebar[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n\\n.content-main[_ngcontent-%COMP%] {\\n  flex: 2.5;\\n}\\n\\n\\n\\n.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .info-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  font-size: 1.6rem;\\n  color:linear-gradient(to right, #370134, #fbc2eb);\\n  margin-bottom: 1rem;\\n}\\n\\n.content-badge[_ngcontent-%COMP%] {\\n  background-color: #e0c3fc;\\n  color: #5b2c8c;\\n  padding: 0.3rem 0.8rem;\\n  border-radius: 1rem;\\n  font-weight: 600;\\n}\\n\\n\\n\\n.content-item[_ngcontent-%COMP%] {\\n  border: 1px solid #e8d7ff;\\n  border-left: 5px solid #25033a;\\n  border-radius: 1rem;\\n  padding: 1rem 1.5rem;\\n  margin-bottom: 1rem;\\n  background: #faf8ff;\\n  transition: background 0.3s;\\n  cursor: pointer;\\n}\\n\\n.content-item[_ngcontent-%COMP%]:hover {\\n  background: #f1e6ff;\\n}\\n\\n.order-badge[_ngcontent-%COMP%] {\\n  background-color: #feb3ff;\\n  color: white;\\n  padding: 0.3rem 0.8rem;\\n  border-radius: 1rem;\\n  font-weight: 600;\\n  margin-right: 1rem;\\n}\\n\\n.type-label[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  padding: 0.2rem 0.7rem;\\n  border-radius: 1rem;\\n  background-color: #e6d6ff;\\n  color: #8a0d49;\\n  margin-left: auto;\\n}\\n\\n\\n\\n.modal-overlay[_ngcontent-%COMP%] {\\n  background-color: rgba(0, 0, 0, 0.6);\\n  -webkit-backdrop-filter: blur(3px);\\n          backdrop-filter: blur(3px);\\n}\\n\\n.modal-container[_ngcontent-%COMP%] {\\n  background: white;\\n  border-radius: 1.5rem;\\n  padding: 2rem;\\n  max-width: 800px;\\n  margin: auto;\\n  box-shadow: 0 10px 30px rgba(0,0,0,0.25);\\n  animation: _ngcontent-%COMP%_slideIn 0.4s ease;\\n}\\n\\n@keyframes _ngcontent-%COMP%_slideIn {\\n  from { transform: translateY(-50px); opacity: 0; }\\n  to { transform: translateY(0); opacity: 1; }\\n}\\n\\n\\n\\n@media (max-width: 768px) {\\n  .course-layout[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n  }\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYmFjay1vZmZpY2UvY29tcG9uZW50cy9jb3VzZS1jb250ZW50L2NvdXJzZS1jb250ZW50L2NvdXJzZS1jb250ZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUJBQXlCO0FBQ3pCO0VBQ0UsdURBQXVEO0VBQ3ZELGlCQUFpQjtFQUNqQixhQUFhO0VBQ2IseUNBQXlDO0VBQ3pDLGNBQWM7QUFDaEI7O0FBRUEsb0JBQW9CO0FBQ3BCO0VBQ0UsYUFBYTtFQUNiLDhCQUE4QjtFQUM5QixtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQixxQkFBcUI7RUFDckIsMkNBQTJDO0VBQzNDLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWix5Q0FBeUM7QUFDM0M7O0FBRUEsdUJBQXVCO0FBQ3ZCO0VBQ0UsdURBQXVEO0VBQ3ZELFlBQVk7RUFDWixZQUFZO0VBQ1osdUJBQXVCO0VBQ3ZCLGlCQUFpQjtFQUNqQixtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLDBDQUEwQztBQUM1Qzs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qix5Q0FBeUM7QUFDM0M7O0FBRUEsV0FBVztBQUNYO0VBQ0UsYUFBYTtFQUNiLFNBQVM7QUFDWDs7QUFFQSxxQkFBcUI7QUFDckI7RUFDRSxpQkFBaUI7RUFDakIscUJBQXFCO0VBQ3JCLGFBQWE7RUFDYixzQ0FBc0M7QUFDeEM7O0FBRUEsWUFBWTtBQUNaO0VBQ0UsT0FBTztBQUNUOztBQUVBO0VBQ0UsU0FBUztBQUNYOztBQUVBLFlBQVk7QUFDWjtFQUNFLGlCQUFpQjtFQUNqQixpREFBaUQ7RUFDakQsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCxzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQSxVQUFVO0FBQ1Y7RUFDRSx5QkFBeUI7RUFDekIsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixvQkFBb0I7RUFDcEIsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQiwyQkFBMkI7RUFDM0IsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQixnQkFBZ0I7RUFDaEIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCxpQkFBaUI7QUFDbkI7O0FBRUEsVUFBVTtBQUNWO0VBQ0Usb0NBQW9DO0VBQ3BDLGtDQUEwQjtVQUExQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIscUJBQXFCO0VBQ3JCLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLHdDQUF3QztFQUN4Qyw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxPQUFPLDRCQUE0QixFQUFFLFVBQVUsRUFBRTtFQUNqRCxLQUFLLHdCQUF3QixFQUFFLFVBQVUsRUFBRTtBQUM3Qzs7QUFFQSxlQUFlO0FBQ2Y7RUFDRTtJQUNFLHNCQUFzQjtFQUN4QjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyogQXJyacODwqhyZS1wbGFuIGfDg8KpbsODwqlyYWwgKi9cclxuLmNvdXJzZS1kYXNoYm9hcmQge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMjBkZWcsICNlMDkwYzM5ZCwgI2M1ZWNmMik7XHJcbiAgbWluLWhlaWdodDogMjAwdmg7XHJcbiAgcGFkZGluZzogMnJlbTtcclxuICBmb250LWZhbWlseTogJ0xlYWd1ZSBTcGFydGFuJywgc2Fucy1zZXJpZjtcclxuICBjb2xvcjogIzRhM2I2NztcclxufVxyXG5cclxuLyogVGl0cmUgcHJpbmNpcGFsICovXHJcbi5jb3Vyc2UtaGVhZGVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDEuNXJlbSAycmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEuNXJlbTtcclxuICBib3gtc2hhZG93OiAwIDhweCAyMHB4IHJnYmEoNzAsIDUsIDYwLCAwLjEpO1xyXG4gIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbn1cclxuXHJcbi5jb3Vyc2UtdGl0bGUge1xyXG4gIGZvbnQtc2l6ZTogMi4ycmVtO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBnYXA6IDAuNzVyZW07XHJcbiAgY29sb3I6IGxpbmVhci1ncmFkaWVudCggIzM3MDEzNCwgI2ZiYzJlYik7XHJcbn1cclxuXHJcbi8qIEJvdXRvbiBtYXV2ZSBzdHlsw4PCqSAqL1xyXG4ubWF1dmUtZ3JhZGllbnQtYnRuIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMzNzAxMzQsICNmYmMyZWIpO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMC43NXJlbSAxLjVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgYm9yZGVyLXJhZGl1czogMnJlbTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDtcclxuICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XHJcbn1cclxuXHJcbi5tYXV2ZS1ncmFkaWVudC1idG46aG92ZXIge1xyXG4gIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XHJcbiAgYm94LXNoYWRvdzogMCA2cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbn1cclxuXHJcbi8qIExheW91dCAqL1xyXG4uY291cnNlLWxheW91dCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBnYXA6IDJyZW07XHJcbn1cclxuXHJcbi8qIENhcnRlIHByaW5jaXBhbGUgKi9cclxuLmNvbnRlbnQtY2FyZCwgLmluZm8tY2FyZCB7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogMS41cmVtO1xyXG4gIHBhZGRpbmc6IDJyZW07XHJcbiAgYm94LXNoYWRvdzogMCA2cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7XHJcbn1cclxuXHJcbi8qIFNpZGViYXIgKi9cclxuLmNvdXJzZS1zaWRlYmFyIHtcclxuICBmbGV4OiAxO1xyXG59XHJcblxyXG4uY29udGVudC1tYWluIHtcclxuICBmbGV4OiAyLjU7XHJcbn1cclxuXHJcbi8qIEhlYWRlcnMgKi9cclxuLmNhcmQtaGVhZGVyIGgyLCAuaW5mby1oZWFkZXIgaDIge1xyXG4gIGZvbnQtc2l6ZTogMS42cmVtO1xyXG4gIGNvbG9yOmxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzM3MDEzNCwgI2ZiYzJlYik7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxufVxyXG5cclxuLmNvbnRlbnQtYmFkZ2Uge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlMGMzZmM7XHJcbiAgY29sb3I6ICM1YjJjOGM7XHJcbiAgcGFkZGluZzogMC4zcmVtIDAuOHJlbTtcclxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuXHJcbi8qIEl0ZW1zICovXHJcbi5jb250ZW50LWl0ZW0ge1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNlOGQ3ZmY7XHJcbiAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjMjUwMzNhO1xyXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbiAgcGFkZGluZzogMXJlbSAxLjVyZW07XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZmFmOGZmO1xyXG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4zcztcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jb250ZW50LWl0ZW06aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6ICNmMWU2ZmY7XHJcbn1cclxuXHJcbi5vcmRlci1iYWRnZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZlYjNmZjtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMC4zcmVtIDAuOHJlbTtcclxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xyXG59XHJcblxyXG4udHlwZS1sYWJlbCB7XHJcbiAgZm9udC1zaXplOiAwLjlyZW07XHJcbiAgcGFkZGluZzogMC4ycmVtIDAuN3JlbTtcclxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlNmQ2ZmY7XHJcbiAgY29sb3I6ICM4YTBkNDk7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbn1cclxuXHJcbi8qIE1vZGFsICovXHJcbi5tb2RhbC1vdmVybGF5IHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNik7XHJcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDNweCk7XHJcbn1cclxuXHJcbi5tb2RhbC1jb250YWluZXIge1xyXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEuNXJlbTtcclxuICBwYWRkaW5nOiAycmVtO1xyXG4gIG1heC13aWR0aDogODAwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4yNSk7XHJcbiAgYW5pbWF0aW9uOiBzbGlkZUluIDAuNHMgZWFzZTtcclxufVxyXG5cclxuQGtleWZyYW1lcyBzbGlkZUluIHtcclxuICBmcm9tIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MHB4KTsgb3BhY2l0eTogMDsgfVxyXG4gIHRvIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyBvcGFjaXR5OiAxOyB9XHJcbn1cclxuXHJcbi8qIFJlc3BvbnNpdmUgKi9cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLmNvdXJzZS1sYXlvdXQge1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","content_r3","description_Content","length","ɵɵpipeBind3","ɵɵlistener","CourseContentComponent_div_20_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","_r8","$implicit","ctx_r7","ɵɵnextContext","ɵɵresetView","showContent","ɵɵtemplate","CourseContentComponent_div_20_p_8_Template","ɵɵclassProp","i_r4","orderIndex_Content","ɵɵtextInterpolate","title_Content","ɵɵclassMap","type_Content","toLowerCase","ɵɵproperty","CourseContentComponent_div_46_Template_div_click_0_listener","_r10","ctx_r9","closeContentModal","CourseContentComponent_div_46_Template_div_click_1_listener","$event","stopPropagation","CourseContentComponent_div_46_Template_button_click_7_listener","ctx_r12","CourseContentComponent_div_46_Template_button_click_11_listener","ctx_r13","ctx_r2","contentType","selectedContent","CourseContentComponent","constructor","fb","route","router","courseService","contentService","sanitizer","contents","editingContentId","contentTypes","selectedFileError","safeVideoUrl","pdfUrl","textContent","isContentModalOpen","selectedFile","isSubmitting","ngOnInit","params","subscribe","courseId","loadCourseAndContents","initForm","contentForm","group","title","required","maxLength","type","url","description","orderIndex","min","duration","quizTitle","questions","array","get","getQuestionOptions","questionIndex","at","getCourseById","course","loadContents","error","console","getContentsByCourseId","sort","a","b","onTypeChange","value","setControl","reset","onFileSelected","event","file","target","files","pdfFileInput","nativeElement","size","reader","FileReader","onload","e","result","patchValue","readAsDataURL","addQuestion","push","text","options","control","correctAnswer","removeQuestion","index","removeAt","addOption","removeOption","optionIndex","content","handleVideoContent","url_Content","quizData","JSON","parse","isYouTubeUrl","videoId","getYouTubeId","embedUrl","bypassSecurityTrustResourceUrl","includes","regExp","match","getSafePdfUrl","getSafeHtml","bypassSecurityTrustHtml","getCharFromCode","code","String","fromCharCode","onSubmit","invalid","formValue","contentData","duration_Content","stringify","save$","updateContent","id_Content","addContent","next","resetForm","err","onEditContent","questionsArray","map","q","opt","onDeleteContent","id","confirm","deleteContent","onCancel","ɵɵdirectiveInject","i1","FormBuilder","i2","ActivatedRoute","Router","i3","CourseService","i4","ContentService","i5","DomSanitizer","selectors","viewQuery","CourseContentComponent_Query","rf","ctx","CourseContentComponent_div_18_Template","CourseContentComponent_div_20_Template","CourseContentComponent_div_46_Template","title_Course","ɵɵtextInterpolate2","description_Course","ɵɵpipeBind2","createdAt_Course"],"sources":["C:\\Users\\Sakka\\Desktop\\Prépa\\final\\dashboard-v2\\src\\app\\back-office\\components\\couse-content\\course-content\\course-content.component.ts","C:\\Users\\Sakka\\Desktop\\Prépa\\final\\dashboard-v2\\src\\app\\back-office\\components\\couse-content\\course-content\\course-content.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { FormBuilder, FormGroup, FormArray, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DomSanitizer, SafeResourceUrl, SafeHtml } from '@angular/platform-browser';\nimport { Content } from '../../../models/content.model';\nimport { Course } from '../../../models/course.model';\nimport { ContentService } from 'src/app/services/content.service';\nimport { CourseService } from 'src/app/services/course.service';\n\n@Component({\n  selector: 'app-course-content',\n  templateUrl: './course-content.component.html',\n  styleUrls: ['./course-content.component.css']\n})\nexport class CourseContentComponent implements OnInit {\n  @ViewChild('videoPlayer') videoPlayer!: ElementRef<HTMLVideoElement>;\n  @ViewChild('pdfFileInput') pdfFileInput!: ElementRef;\n\n  course!: Course;\n  contents: Content[] = [];\n  contentForm!: FormGroup;\n  courseId!: number;\n  editingContentId: number | null = null;\n  contentTypes = ['VIDEO', 'PDF', 'QUIZ', 'TEXT'];\n  selectedFileError: string | null = null;\n\n  selectedContent: Content | null = null;\n  contentType: string = '';\n  safeVideoUrl: SafeResourceUrl | null = null;\n  pdfUrl: string = '';\n  quizData: any;\n  textContent: string = '';\n  isContentModalOpen: boolean = false;\n  selectedFile: File | null = null;\n  isSubmitting = false;\n\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private courseService: CourseService,\n    private contentService: ContentService,\n    private sanitizer: DomSanitizer\n  ) {}\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      this.courseId = +params['id'];\n      this.loadCourseAndContents();\n      this.initForm();\n    });\n  }\n\n  initForm(): void {\n    this.contentForm = this.fb.group({\n      title: ['', [Validators.required, Validators.maxLength(100)]],\n      type: ['', Validators.required],\n      url: [''],\n      description: [''],\n      orderIndex: [0, [Validators.required, Validators.min(0)]],\n      duration: [0, [Validators.min(0)]],\n      quizTitle: [''],\n      questions: this.fb.array([])\n    });\n  }\n\n  get questions(): FormArray {\n    return this.contentForm.get('questions') as FormArray;\n  }\n\n  getQuestionOptions(questionIndex: number): FormArray {\n    return this.questions.at(questionIndex).get('options') as FormArray;\n  }\n\n  loadCourseAndContents(): void {\n    this.courseService.getCourseById(this.courseId).subscribe(\n      (course) => {\n        this.course = course;\n        this.loadContents();\n      },\n      (error) => console.error('Error loading course:', error)\n    );\n  }\n\n  loadContents(): void {\n    this.contentService.getContentsByCourseId(this.courseId).subscribe(\n      (contents) => {\n        this.contents = contents.sort((a, b) => \n          (a.orderIndex_Content || 0) - (b.orderIndex_Content || 0)\n        );\n      },\n      (error) => console.error('Error loading contents:', error)\n    );\n  }\n\n  onTypeChange(): void {\n    const type = this.contentForm.get('type')?.value;\n    \n    if (type !== 'QUIZ') {\n      this.contentForm.setControl('questions', this.fb.array([]));\n    }\n    if (type !== 'PDF') {\n      this.selectedFile = null;\n    }\n    if (type !== 'VIDEO') {\n      this.contentForm.get('url')?.reset();\n    }\n    if (type !== 'TEXT') {\n      this.contentForm.get('description')?.reset();\n    }\n  }\n\n  onFileSelected(event: any): void {\n    const file: File = event.target.files[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        this.selectedFileError = 'Please select a valid PDF file';\n        this.pdfFileInput.nativeElement.value = '';\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        this.selectedFileError = 'File size exceeds 5MB limit';\n        this.pdfFileInput.nativeElement.value = '';\n        return;\n      }\n        if (file) {\n          const reader = new FileReader();\n          reader.onload = (e: any) => {\n            this.pdfUrl = e.target.result; // URL data\n            this.contentForm.patchValue({\n              url: e.target.result // Stocke l'URL dans le formulaire\n            });\n          };\n          reader.readAsDataURL(file);\n        }\n      }\n  }\n\n  addQuestion(): void {\n    this.questions.push(this.fb.group({\n      text: ['', Validators.required],\n      options: this.fb.array([this.fb.control('', Validators.required)]),\n      correctAnswer: [0, Validators.required]\n    }));\n  }\n\n  removeQuestion(index: number): void {\n    this.questions.removeAt(index);\n  }\n\n  addOption(questionIndex: number): void {\n    this.getQuestionOptions(questionIndex).push(this.fb.control('', Validators.required));\n  }\n\n  removeOption(questionIndex: number, optionIndex: number): void {\n    this.getQuestionOptions(questionIndex).removeAt(optionIndex);\n  }\n\n  showContent(content: Content): void {\n    this.selectedContent = content;\n    this.contentType = content.type_Content;\n    this.isContentModalOpen = true;\n\n    switch(content.type_Content) {\n      case 'VIDEO':\n        this.handleVideoContent(content.url_Content);\n        break;\n      case 'PDF':\n        this.pdfUrl = content.url_Content;\n        break;\n      case 'QUIZ':\n        try {\n          this.quizData = JSON.parse(content.description_Content || '{}');\n        } catch {\n          this.quizData = { title: 'Quiz', questions: [] };\n        }\n        break;\n      case 'TEXT':\n        this.textContent = content.description_Content || '';\n        break;\n    }\n  }\n\n  private handleVideoContent(url: string): void {\n    if (this.isYouTubeUrl(url)) {\n      const videoId = this.getYouTubeId(url);\n      const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1`;\n      this.safeVideoUrl = this.sanitizer.bypassSecurityTrustResourceUrl(embedUrl);\n    } else {\n      this.safeVideoUrl = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n    }\n  }\n\n  public isYouTubeUrl(url: string): boolean {\n    return url?.includes('youtube.com') || url?.includes('youtu.be');\n  }\n\n  private getYouTubeId(url: string): string {\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\n    const match = url.match(regExp);\n    return (match && match[2].length === 11) ? match[2] : '';\n  }\n\n  public getSafePdfUrl(url: string): SafeResourceUrl {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n\n  public getSafeHtml(content: string): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(content);\n  }\n\n  public getCharFromCode(code: number): string {\n    return String.fromCharCode(code);\n  }\n\n  closeContentModal(): void {\n    this.isContentModalOpen = false;\n    this.selectedContent = null;\n    this.safeVideoUrl = null;\n  }\n\n  onSubmit(): void {\n    if (this.contentForm.invalid) return;\n\n    this.isSubmitting = true;\n    const formValue = this.contentForm.value;\n    const contentData: any = {\n      title_Content: formValue.title,\n      type_Content: formValue.type,\n      orderIndex_Content: formValue.orderIndex,\n      duration_Content: formValue.duration\n    };\n\n    switch(formValue.type) {\n      case 'QUIZ':\n        contentData.description_Content = JSON.stringify({\n          title: formValue.quizTitle,\n          questions: formValue.questions\n        });\n        break;\n      case 'TEXT':\n        contentData.description_Content = formValue.description;\n        break;\n      case 'VIDEO':\n        contentData.url_Content = formValue.url;\n        break;\n      case 'PDF':\n        // Handle PDF file upload\n        break;\n    }\n\n    const save$ = this.editingContentId\n      ? this.contentService.updateContent({\n          ...contentData,\n          id_Content: this.editingContentId\n        })\n      : this.contentService.addContent(contentData, this.courseId);\n\n    save$.subscribe({\n      next: () => {\n        this.isSubmitting = false;\n        this.resetForm();\n        this.loadContents();\n      },\n      error: (err) => {\n        console.error('Error saving content:', err);\n        this.isSubmitting = false;\n      }\n    });\n  }\n\n  onEditContent(content: Content, event: Event): void {\n    event.stopPropagation();\n    this.editingContentId = content.id_Content;\n    \n    if (content.type_Content === 'QUIZ') {\n      try {\n        const quizData = JSON.parse(content.description_Content || '{}');\n        this.contentForm.patchValue({\n          quizTitle: quizData.title\n        });\n        \n        const questionsArray = this.fb.array(\n          quizData.questions?.map((q: any) => \n            this.fb.group({\n              text: [q.text, Validators.required],\n              options: this.fb.array(\n                q.options?.map((opt: string) => \n                  this.fb.control(opt, Validators.required)\n                ) || []\n              ),\n              correctAnswer: [q.correctAnswer ?? 0, Validators.required]\n            })\n          ) || []\n        );\n        \n        this.contentForm.setControl('questions', questionsArray);\n      } catch (e) {\n        console.error('Error parsing quiz data:', e);\n      }\n    }\n    \n    this.contentForm.patchValue({\n      title: content.title_Content,\n      type: content.type_Content,\n      url: content.url_Content || '',\n      description: content.description_Content || '',\n      orderIndex: content.orderIndex_Content || 0,\n      duration: content.duration_Content || 0\n    });\n  }\n\n  onDeleteContent(id: number, event: Event): void {\n    event.stopPropagation();\n    if (confirm('Are you sure you want to delete this content?')) {\n      this.contentService.deleteContent(id).subscribe(\n        () => this.loadContents(),\n        (error) => console.error('Delete error:', error)\n      );\n    }\n  }\n\n  resetForm(): void {\n    this.contentForm.reset({\n      orderIndex: 0,\n      duration: 0\n    });\n    this.contentForm.setControl('questions', this.fb.array([]));\n    this.selectedFile = null;\n    this.editingContentId = null;\n    if (this.pdfFileInput) {\n      this.pdfFileInput.nativeElement.value = '';\n    }\n  }\n\n  onCancel(): void {\n    this.resetForm();\n  }\n}","<div class=\"container course-dashboard\">\n  <div class=\"course-header\">\n    <h1 class=\"course-title\">\n      <i class=\"bi bi-journal-bookmark-fill\"></i>\n      Course Content: {{ course?.title_Course }}\n    </h1>\n    <button class=\"mauve-gradient-btn\" routerLink=\"/admin/courses\">\n      <i class=\"bi bi-arrow-left\"></i> Back to Courses\n    </button>\n  </div>\n\n  <div class=\"course-layout\">\n    <!-- Main Content Section -->\n    <div class=\"content-main\">\n      <div class=\"content-card\">\n        <div class=\"card-header\">\n          <h2><i class=\"bi bi-list-task\"></i> Content List</h2>\n          <span class=\"content-badge\">{{ contents.length }} item{{ contents.length !== 1 ? 's' : '' }}</span>\n        </div>\n        \n        <div class=\"card-body\">\n          <div *ngIf=\"contents.length === 0\" class=\"empty-state\">\n            <i class=\"bi bi-info-circle\"></i>\n            No content has been added to this course yet.\n          </div>\n          \n          <div class=\"content-items\">\n            <div *ngFor=\"let content of contents; let i = index\" \n                 class=\"content-item\"\n                 [class.even-item]=\"i % 2 === 0\"\n                 (click)=\"showContent(content)\">\n              <div class=\"item-header\">\n                <span class=\"order-badge\">#{{ content.orderIndex_Content }}</span>\n                <h3>{{ content.title_Content }}</h3>\n                <span class=\"type-label\" [class]=\"'type-' + content.type_Content.toLowerCase()\">\n                  {{ content.type_Content }}\n                </span>\n              </div>\n              \n              <p class=\"item-description\" *ngIf=\"content.description_Content\">\n                {{ (content.description_Content.length > 120) ? \n                   (content.description_Content | slice:0:120) + '...' : \n                   content.description_Content }}\n              </p>\n              \n           \n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Sidebar Section -->\n    <div class=\"course-sidebar\">\n      <div class=\"info-card\">\n        <div class=\"info-header\">\n          <h2><i class=\"bi bi-info-circle\"></i> Course Details</h2>\n        </div>\n        <div class=\"info-body\">\n          <div class=\"info-section\">\n            <h3>Description</h3>\n            <p>{{ course?.description_Course || 'No description available' }}</p>\n          </div>\n          <div class=\"info-section\">\n            <h3>Statistics</h3>\n            <div class=\"stats-container\">\n              <div class=\"stat-item\">\n                <i class=\"bi bi-file-text\"></i>\n                <span>Contents: {{ contents.length }}</span>\n              </div>\n              <div class=\"stat-item\">\n                <i class=\"bi bi-calendar-check\"></i>\n                <span>Last Updated: {{ course?.createdAt_Course | date:'mediumDate' }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Content Display Modal -->\n<div *ngIf=\"isContentModalOpen\" class=\"modal-overlay\" (click)=\"closeContentModal()\">\n  <div class=\"modal-container\" (click)=\"$event.stopPropagation()\">\n    <div class=\"modal-header\">\n      <div class=\"modal-title\">\n        <i class=\"bi\" \n           [class.bi-film]=\"contentType === 'VIDEO'\"\n           [class.bi-file-earmark-pdf]=\"contentType === 'PDF'\"\n           [class.bi-question-circle]=\"contentType === 'QUIZ'\"\n           [class.bi-file-text]=\"contentType === 'TEXT'\"></i>\n        <h2>{{ selectedContent?.title_Content }}</h2>\n      </div>\n      <button class=\"modal-close\" (click)=\"closeContentModal()\">\n        <i class=\"bi bi-x-lg\"></i>\n      </button>\n    </div>\n    \n    <div class=\"modal-content\">\n      <!-- Content display remains the same -->\n    </div>\n    \n    <div class=\"modal-footer\">\n      <button class=\"mauve-gradient-btn\" (click)=\"closeContentModal()\">\n        <i class=\"bi bi-check-lg\"></i> Close\n      </button>\n    </div>\n  </div>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}