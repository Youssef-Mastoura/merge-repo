{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../dashboard.service\";\nimport * as i2 from \"src/app/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/auth.service\";\nimport * as i5 from \"@angular/common\";\nfunction TopBarComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"a\", 22);\n    i0.ɵɵtext(2, \" User Details \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function TopBarComponent_div_24_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(4, \" Logout \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class TopBarComponent {\n  constructor(dashboard, userService, router, authService) {\n    this.dashboard = dashboard;\n    this.userService = userService;\n    this.router = router;\n    this.authService = authService;\n    this.isProfileDropdownOpen = false;\n  }\n  openSidebar() {\n    this.dashboard.openSidebar();\n  }\n  toggleProfileDropdown(event) {\n    this.userInfo = this.authService.getCurrentUserInfo();\n    event.stopPropagation(); // Empêche la propagation du clic\n    this.isProfileDropdownOpen = !this.isProfileDropdownOpen;\n  }\n  closeProfileDropdown(event) {\n    if (!event.target.closest('#user-menu-button') && !event.target.closest('#profile-dropdown')) {\n      this.isProfileDropdownOpen = false;\n    }\n  }\n  logout() {\n    this.userService.logout(); // Appel à la méthode de déconnexion\n    this.isProfileDropdownOpen = false; // Ferme le dropdown\n  }\n}\n\nTopBarComponent.ɵfac = function TopBarComponent_Factory(t) {\n  return new (t || TopBarComponent)(i0.ɵɵdirectiveInject(i1.DashboardService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthService));\n};\nTopBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TopBarComponent,\n  selectors: [[\"top-bar\"]],\n  hostBindings: function TopBarComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function TopBarComponent_click_HostBindingHandler($event) {\n        return ctx.closeProfileDropdown($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 25,\n  vars: 1,\n  consts: [[1, \"relative\", \"z-10\", \"h-16\", \"w-full\", \"items-center\", \"md:h-20\"], [1, \"relative\", \"mx-auto\", \"flex\", \"h-full\", \"flex-col\", \"justify-center\", \"px-3\"], [1, \"relative\", \"flex\", \"w-full\", \"items-center\", \"pl-1\", \"sm:ml-0\", \"sm:pr-2\"], [1, \"container\", \"relative\", \"left-0\", \"flex\", \"h-auto\", \"w-3/4\"], [1, \"group\", \"relative\", \"flex\", \"h-full\", \"w-12\", \"items-center\"], [\"type\", \"button\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle sidebar\", 1, \"text-4xl\", \"text-gray-700\", \"focus:outline-none\", \"lg:hidden\", 3, \"click\"], [1, \"group\", \"relative\", \"hidden\", \"h-full\", \"w-full\", \"items-center\", \"md:flex\", \"lg:w-64\"], [1, \"absolute\", \"flex\", \"h-10\", \"w-auto\", \"cursor-pointer\", \"items-center\", \"justify-center\", \"p-3\", \"pr-2\", \"text-sm\", \"uppercase\", \"text-gray-500\", \"sm:hidden\"], [\"fill\", \"none\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"relative\", \"h-5\", \"w-5\"], [\"d\", \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"relative\", \"ml-5\", \"flex\", \"w-9/12\", \"items-center\", \"justify-end\", \"p-1\", \"sm:right-auto\", \"sm:mr-0\", \"md:w-1/4\"], [1, \"block\", \"pr-1\", \"text-gray-700\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 20 20\", \"fill\", \"currentColor\", 1, \"h-6\", \"w-6\"], [\"d\", \"M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z\"], [1, \"relative\", \"block\", \"rounded\", \"px-3\", \"py-2\", \"text-gray-700\"], [\"d\", \"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z\"], [1, \"absolute\", \"right-0\", \"top-0\", \"rounded-full\", \"bg-blue-700\", \"px-2\", \"py-0.5\", \"text-xs\", \"font-bold\", \"text-white\"], [1, \"relative\", \"pl-5\"], [\"type\", \"button\", \"id\", \"user-menu-button\", \"aria-expanded\", \"false\", \"aria-haspopup\", \"true\", 1, \"flex\", \"rounded-full\", \"bg-gray-800\", \"text-sm\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-white\", \"focus:ring-offset-2\", \"focus:ring-offset-gray-800\", 3, \"click\"], [\"src\", \"./assets/images/1.jpg\", \"alt\", \"User profile\", 1, \"h-10\", \"w-10\", \"rounded-full\", \"cursor-pointer\"], [\"id\", \"profile-dropdown\", \"class\", \"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\", \"role\", \"menu\", \"aria-orientation\", \"vertical\", \"aria-labelledby\", \"user-menu-button\", \"tabindex\", \"-1\", 4, \"ngIf\"], [\"id\", \"profile-dropdown\", \"role\", \"menu\", \"aria-orientation\", \"vertical\", \"aria-labelledby\", \"user-menu-button\", \"tabindex\", \"-1\", 1, \"absolute\", \"right-0\", \"z-10\", \"mt-2\", \"w-48\", \"origin-top-right\", \"rounded-md\", \"bg-white\", \"py-1\", \"shadow-lg\", \"ring-1\", \"ring-black\", \"ring-opacity-5\", \"focus:outline-none\"], [\"role\", \"menuitem\", \"tabindex\", \"-1\", 1, \"block\", \"px-4\", \"py-2\", \"text-sm\", \"text-gray-700\", \"hover:bg-gray-100\"], [\"role\", \"menuitem\", \"tabindex\", \"-1\", 1, \"block\", \"px-4\", \"py-2\", \"text-sm\", \"text-gray-700\", \"hover:bg-gray-100\", 3, \"click\"]],\n  template: function TopBarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function TopBarComponent_Template_button_click_5_listener() {\n        return ctx.openSidebar();\n      });\n      i0.ɵɵtext(6, \" \\u2261 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 6)(8, \"div\", 7);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(9, \"svg\", 8);\n      i0.ɵɵelement(10, \"path\", 9);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(11, \"div\", 10)(12, \"a\", 11);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(13, \"svg\", 12);\n      i0.ɵɵelement(14, \"path\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(15, \"a\", 14)(16, \"span\");\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(17, \"svg\", 12);\n      i0.ɵɵelement(18, \"path\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(19, \"span\", 16);\n      i0.ɵɵtext(20, \" 3 \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 17)(22, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function TopBarComponent_Template_button_click_22_listener($event) {\n        return ctx.toggleProfileDropdown($event);\n      });\n      i0.ɵɵelement(23, \"img\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(24, TopBarComponent_div_24_Template, 5, 0, \"div\", 20);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngIf\", ctx.isProfileDropdownOpen);\n    }\n  },\n  dependencies: [i5.NgIf],\n  encapsulation: 2\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","TopBarComponent_div_24_Template_a_click_3_listener","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","logout","TopBarComponent","constructor","dashboard","userService","router","authService","isProfileDropdownOpen","openSidebar","toggleProfileDropdown","event","userInfo","getCurrentUserInfo","stopPropagation","closeProfileDropdown","target","closest","ɵɵdirectiveInject","i1","DashboardService","i2","UserService","i3","Router","i4","AuthService","selectors","hostBindings","TopBarComponent_HostBindings","rf","ctx","$event","ɵɵresolveDocument","TopBarComponent_Template_button_click_5_listener","ɵɵnamespaceSVG","ɵɵelement","ɵɵnamespaceHTML","TopBarComponent_Template_button_click_22_listener","ɵɵtemplate","TopBarComponent_div_24_Template","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\Sakka\\Desktop\\PICLOUD-GestionUser - Copie\\dashboard-v2\\src\\app\\dashboard\\top-bar\\top-bar.component.ts","C:\\Users\\Sakka\\Desktop\\PICLOUD-GestionUser - Copie\\dashboard-v2\\src\\app\\dashboard\\top-bar\\top-bar.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\nimport {DashboardService} from \"../dashboard.service\";\nimport { Router } from '@angular/router';\nimport { UserService } from 'src/app/user.service';\nimport { AuthService } from 'src/app/auth.service';\n\n@Component({\n  selector: 'top-bar',\n  templateUrl: './top-bar.component.html',\n})\nexport class TopBarComponent {\n  constructor(private dashboard: DashboardService,    private userService: UserService, private router:Router\n  ,private authService:AuthService) {\n  }\n\n  openSidebar(){\n    this.dashboard.openSidebar()\n  }\n  isProfileDropdownOpen = false;\n  userInfo: any;\n\n\n  toggleProfileDropdown(event: Event): void {\n    this.userInfo = this.authService.getCurrentUserInfo();\n\n    event.stopPropagation(); // Empêche la propagation du clic\n    this.isProfileDropdownOpen = !this.isProfileDropdownOpen;\n  }\n\n  @HostListener('document:click', ['$event'])\n  closeProfileDropdown(event: Event): void {\n    if (!(event.target as HTMLElement).closest('#user-menu-button') && \n        !(event.target as HTMLElement).closest('#profile-dropdown')) {\n      this.isProfileDropdownOpen = false;\n    }\n  }\n  logout(): void {\n    this.userService.logout(); // Appel à la méthode de déconnexion\n    this.isProfileDropdownOpen = false; // Ferme le dropdown\n  }\n\n  \n}\n","<header class=\"relative z-10 h-16 w-full items-center md:h-20\">\n  <div class=\"relative mx-auto flex h-full flex-col justify-center px-3\">\n    <div class=\"relative flex w-full items-center pl-1 sm:ml-0 sm:pr-2\">\n      <div class=\"container relative left-0 flex h-auto w-3/4\">\n        <div class=\"group relative flex h-full w-12 items-center\">\n          <button\n            type=\"button\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle sidebar\"\n            class=\"text-4xl text-gray-700 focus:outline-none lg:hidden\"\n            (click)=\"openSidebar()\"\n          >\n            &#8801;\n          </button>\n        </div>\n        <div\n          class=\"group relative hidden h-full w-full items-center md:flex lg:w-64\"\n        >\n          <div\n            class=\"absolute flex h-10 w-auto cursor-pointer items-center justify-center p-3 pr-2 text-sm uppercase text-gray-500 sm:hidden\"\n          >\n            <svg\n              fill=\"none\"\n              class=\"relative h-5 w-5\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n         \n        </div>\n      </div>\n      <div\n        class=\"relative ml-5 flex w-9/12 items-center justify-end p-1 sm:right-auto sm:mr-0 md:w-1/4\"\n      >\n        <a class=\"block pr-1 text-gray-700\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            class=\"h-6 w-6\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              d=\"M5.5 16a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 16h-8z\"\n            />\n          </svg>\n        </a>\n        <a  class=\"relative block rounded px-3 py-2 text-gray-700\">\n          <span>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              class=\"h-6 w-6\"\n              viewBox=\"0 0 20 20\"\n              fill=\"currentColor\"\n            >\n              <path\n                d=\"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z\"\n              />\n            </svg>\n          </span>\n          <span\n            class=\"absolute right-0 top-0 rounded-full bg-blue-700 px-2 py-0.5 text-xs font-bold text-white\"\n          >\n            3\n          </span>\n        </a>\n        \n        <!-- Profile dropdown -->\n        <div class=\"relative pl-5\">\n          <button \n            (click)=\"toggleProfileDropdown($event)\"\n            type=\"button\"\n            class=\"flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800\"\n            id=\"user-menu-button\"\n            aria-expanded=\"false\"\n            aria-haspopup=\"true\"\n          >\n            <img\n              class=\"h-10 w-10 rounded-full cursor-pointer\"\n              src=\"./assets/images/1.jpg\"\n              alt=\"User profile\"\n            >\n          </button>\n\n          <!-- Dropdown menu -->\n          <div \n          *ngIf=\"isProfileDropdownOpen\"\n          id=\"profile-dropdown\"\n          class=\"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\n          role=\"menu\"\n          aria-orientation=\"vertical\"\n          aria-labelledby=\"user-menu-button\"\n          tabindex=\"-1\"\n        >\n          <a \n            class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n            role=\"menuitem\"\n            tabindex=\"-1\"\n          >\n            User Details\n          </a>\n          <a  (click)=\"logout()\"\n            class=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n            role=\"menuitem\"\n            tabindex=\"-1\"\n          >\n            Logout\n          </a>\n        </div>\n      </div>\n      </div>\n    </div>\n  </div>\n</header>\n\n<!-- Overlay pour fermer le dropdown quand on clique ailleurs -->\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}